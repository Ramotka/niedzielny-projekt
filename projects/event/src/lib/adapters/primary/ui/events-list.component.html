<div class="h-100" *ngIf="events$ | async as event">
  <div class="container-fluid w-75 mx-auto" *ngIf="event.length; else template">
    <div
      class="container d-flex align-items-center justify-content-between border-bottom mx-auto pt-3"
    >
      <div class="d-flex justify-content-start align-items-center">
        <p class="fs-3 fw-bold me-5">Events</p>
        <p class="fs-3 fw-bold">Users</p>
      </div>

      <div class="py-3">
        <a routerLink="/event-form"
          ><button type="button" class="btn btn-success">
            Create new event
          </button></a
        >
      </div>
    </div>

    <div class="mt-4 w-50">
      <form
        class="d-flex align-items-center"
        [formGroup]="searchedEvent"
        (ngSubmit)="onSearchButtonSubmited(searchedEvent)"
      >
        <input
          class="me-3 ps-3 py-2 rounded border-0 w-75"
          type="text"
          formControlName="title"
          placeholder="Search event"
        />
        <input class="btn bg-gray-400 text-dark" type="submit" value="Search" />
      </form>
    </div>

    <div class="container-fluid bg-white mx-auto py-4 px-5 mt-5">
      <table class="table table-borderless text-center">
        <thead class="bg-gray-400">
          <tr>
            <th>Event Title</th>
            <th>Link</th>
            <th>Date</th>
            <th>Manage</th>
            <th>Delete</th>
          </tr>
        </thead>

        <tbody>
          <tr class="" *ngFor="let event of events$ | async">
            <td class="d-flex align-items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-calendar2-minus me-2"
                viewBox="0 0 16 16"
              >
                <path
                  d="M5.5 10.5A.5.5 0 0 1 6 10h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z"
                />
                <path
                  d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"
                />
                <path
                  d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"
                />
              </svg>
              <p class="m-0 text-dark">{{ event.title }}</p>
            </td>
            <td>
              <a
                class="text-decoration-none"
                [routerLink]="'/event/' + event.id"
                >Go to Event</a
              >
            </td>
            <td>
              <p class="m-0 text-dark">
                {{ formatDate(event.date[0]) | date: "dd.MM.YYYY" }} -
                {{ formatDate(event.date[1]) | date: "dd.MM.YYYY" }}
              </p>
            </td>
            <td>
              <button type="button" class="btn bg-gray-400 border-0">
                <a
                  class="text-decoration-none text-dark"
                  [routerLink]="'/event/' + event.id + '/edit-event'"
                  >Edit</a
                >
              </button>
            </td>
            <td>
              <button
                type="button"
                class="btn border-0"
                (click)="onDeleteButtonClicked(event.id)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  fill="currentColor"
                  class="bi bi-trash fs-6 text-dark g-col-2"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"
                  />
                  <path
                    fill-rule="evenodd"
                    d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"
                  />
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<ng-template #template>
  <div
    class="container-fluid w-75 mx-auto d-flex justify-content-center align-items-center flex-column my-auto h-75"
  >
    <h1>Start building your dashboard</h1>

    <p>Create your first event</p>
    <a class="btn bg-success text-white" routerLink="/event-form" role="button"
      >Create event</a
    >
  </div>
</ng-template>
